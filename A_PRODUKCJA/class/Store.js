"use strict";var Store={run:function(){this.runnning||(this.runnning=!0,console.log("MAKE ME SHOP"),this.availabilityCheck())},availabilityCheck:function(){google.payments.inapp.getSkuDetails({parameters:{env:"prod"},success:this.onSkuDetails.bind(this),failure:this.onSkuDetailsFail.bind(this)})},setIsStoreOpen:function(e){chrome.storage.local.set({isStoreOpen:e}),this.availabilityCheckTimeout=setTimeout(this.availabilityCheck.bind(this),3e4)},onSkuDetails:function(e){try{e.response.details.inAppProducts.length>0?this.setIsStoreOpen(!0):this.setIsStoreOpen(!1)}catch(t){this.setIsStoreOpen(!1)}},onSkuDetailsFail:function(e){this.setIsStoreOpen(!1)},updatePurchasedElements:function(){google.payments.inapp.getPurchases({parameters:{env:"prod"},success:this.onLicenseUpdate.bind(this),failure:this.onLicenseUpdateFail.bind(this)})},onLicenseUpdate:function(e){var t=e.response.details,i=chrome.runtime.id.toString(),s={};for(var n in t)if("ACTIVE"===t[n].state){var a=t[n].sku.split(i+"_inapp").join("");s[a]=!0}s.speech_to_text=!0,chrome.storage.sync.set({purchasedinapp:s})},onLicenseUpdateFail:function(e){chrome.storage.sync.get("purchasedinapp",function(e){var t={};e&&e.purchasedinapp&&(t=e.purchasedinapp),t.speech_to_text=!0,chrome.storage.sync.set({purchasedinapp:t})})}};