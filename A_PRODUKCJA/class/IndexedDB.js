"use strict";var IndexedDB={getNotes:function(){var e=new Promise(function(e,o){var r=indexedDB.open("notes",4);r.onupgradeneeded=function(e){console.log("IndexedDB upgrade needed."),console.log(e);var r=e.target.result;r.onerror=function(e){o(e.taget.errorCode)};try{var n=r.createObjectStore("notes",{keyPath:"id"});n.createIndex("by_id","id",{unique:!0})}catch(e){console.log(e),o(e)}},r.onsuccess=function(r){var n=this.result;n.onerror=function(e){o(e.target.errorCode)};var t=null;try{t=n.transaction("notes","readwrite")}catch(r){return console.log(r),!1}var c=t.objectStore("notes"),s=(c.index("by_id"),[]);t.oncomplete=function(o){e(s)};var a=c.openCursor();a.onerror=function(e){console.log(e)},a.onsuccess=function(e){var o=e.target.result;o&&(s.push(o.value),o["continue"]())}},r.onerror=function(e){console.log("Error"),console.dir(e),o(e)}});return e},putNotes:function(e){var o=indexedDB.open("notes");o.onsuccess=function(o){var r=o.target.result,n=r.transaction("notes","readwrite"),t=n.objectStore("notes");t.index("by_id");for(var c in e){var s=e[c];if(s)try{t.put(s)}catch(o){console.error(o)}}},o.onerror=function(e){console.error("Error",e)}},clearRemovedNotes:function(){var e=new Promise(function(){var e=indexedDB.open("notes");e.onsuccess=function(e){var o=e.target.result,r=o.transaction("notes","readwrite"),n=r.objectStore("notes"),t=n.openCursor(),c=[];t.onerror=function(e){console.log(e)},t.onsuccess=function(e){var o=e.target.result;o&&(c.push(o.value),o["continue"]());var r=!0,t=!1,s=void 0;try{for(var a,i=c[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var u=a.value;Boolean(u.removed)===!0&&n["delete"](u.id)}}catch(l){t=!0,s=l}finally{try{!r&&i["return"]&&i["return"]()}finally{if(t)throw s}}}},e.onerror=function(e){console.log("Error"),console.dir(e)}});return e}};