"use strict";var Sync={synchronize:function(){var n=this,t=arguments.length<=0||void 0===arguments[0]?null:arguments[0];clearTimeout(this.synctimeout),this.synctimeout=setTimeout(function(){n.synchronizeNow(t)},3e3)},synchronizeNow:function(){var n=this,t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],e=new Promise(function(e,o){clearTimeout(n.synctimeout),n.findTheWay().then(function(n){n.synchronize(t).then(function(){e()})["catch"](function(n){log.error(n)})})["catch"](function(n){log.error(n)})});return e},syncLoop:function(){var n=this,t=arguments.length<=0||void 0===arguments[0]?1e4:arguments[0];this.syncLoopIsGoing=!0,clearTimeout(this.syncLoopTimeout),this.syncLoopTimeout=setTimeout(function(){n.synchronizeNow().then(function(){n.syncLoop(t)})},t)},syncLoopStop:function(){this.syncLoopIsGoing=!1,clearTimeout(this.syncLoopTimeout)},findTheWay:function(){var n=this,t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=new Promise(function(e,o){n.pwj_sync===!0?e(SyncViaProWebJect):n.pwj_sync===!1?e(SyncViaGoogleDrive):t===!1?n.updateTheWay().then(function(){e(n.findTheWay(!0))}):o()});return e},updateTheWay:function(){var n=this,t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],e=new Promise(function(e,o){t?o():chrome.storage.sync.get(["pwj_sync","pwj_pair_code"],function(t){t&&t.pwj_sync&&t.pwj_pair_code?(n.pwj_sync=t.pwj_sync,n.pwj_pair_code=t.pwj_pair_code):(n.pwj_sync=!1,n.pwj_pair_code=null),e(!0)})});return e}};